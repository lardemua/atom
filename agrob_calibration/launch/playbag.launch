<launch>
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- %%%%%%%%%%%%% ATOMIC Framework %%%%%%%%%%%%%%%%%%%%%-->
<!-- playbag.launch : Plays back the bag file. Sets up image decompressors if needed, reads the urdf robot description -->
<!-- This file was generated automatically by the script configure_calibration_pkg on the 31/05/2020 18:09:28-->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- Parameters-->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- bag_file: you can give another bagfile to the launch file using this arg-->
<arg name="bag_file" default="/home/mike/bagfiles/agrob/agrob_calibration_2020-05-20-12-2/calibration_2020-05-20-12-25-58_0.bag"/>
<!-- bag_start: starting time for playing back the bag file. Check "rosbag play -h"-->
<arg name="bag_start" default="0"/>
<arg name ="bag_rate" default ="1" />
<arg name="description_file" default="$(find agrob_calibration)/urdf/description.urdf.xacro"/>
<arg name="rviz_file" default="$(find agrob_calibration)/rviz/set_initial_estimate.rviz"/>

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- Load robot description and tf generators -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<param name = "robot_description" command = "$(find xacro)/xacro $(arg description_file)" />
<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- Playback the bag file -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<param name="/use_sim_time" value="true"/>
<node pkg="rosbag" type="play" name="rosbag_play" output="screen" args=" $(arg bag_file) --clock -r $(arg bag_rate) -l -s $(arg bag_start) /tf:=/tf_dev_null /tf_static:=/tf_static_dev_null"/>


<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- Image Topic Decompression -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<node pkg="image_transport" type="republish" name="republish_left_camera" output="screen" args="compressed in:=/zed/zed_node/left/image raw out:=/zed/zed_node/left/image"/>
<node pkg="image_transport" type="republish" name="republish_right_camera" output="screen" args="compressed in:=/zed/zed_node/right/image raw out:=/zed/zed_node/right/image"/>



<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!-- Visualization -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rviz_file)" required="true"/>

</launch>